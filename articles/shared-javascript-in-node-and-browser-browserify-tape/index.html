<html>
  <head>
    <title>Share javascript in node and the browser using Browserify and Tape</title>
    <link rel="stylesheet" type="text/css" href="/static/style/style.css">
  </head>
  <body>
    <h1 class="title">Share javascript in node and the browser with Browserify</h1>
    <h3 class="byline">Posted by: <a href="sethlakowske.com">Seth Lakowske</a></h3>
    <p class="date">Published: <time pubdate="pubdate">2015-01-21</time></p>

    <p>
      My goal is to use one language across two environments, the
      server and the browser.  I want to do so easily and I have
      attempted to achieve this in the past, but ran into
      difficulties.
    </p>
    <h2>Requirejs:</h2>
    <p>
      I tried Requirejs on the server and browser.  I thought the API was
      unnatural relative to CommonJS, but if it got me to my goal of
      shared Javascript, I would accept it as a cost of commonality.
      Additional cost crept in, I started managing a Requirejs
      configuration script, which started simple, but became more
      unweildy as I "shimed" various libraries that I wanted to
      require in my project.  Some libraries didn't shim right,
      befuddled I spent hours searching google for how to get
      library X to work with Requirejs.  I didn't like spending time
      debugging my tools.  This was supposed to be easy.
    </p>
    <h2>Browserify:</h2>
    <p>
      My initial exposure to Browserify was while I was writing a
      Backbone application and testing with Mocha and Sinon.  These
      libraries were not written as CommonJS modules - the
      native module system of Nodejs.  As a consequence, there was no
      guarantee they would work well with Browserify.  At the time, I was more concerned
      with these libraries than my module system, so I choose to go with
      Requirejs.  While the pains of Requirejs started to build, I
      kept reading about people using Browserify.  I was also becoming
      more familiar with Nodejs and its pipe API, which I am fond
      of from my Unix experience.  When I learned the power of pipes
      and streams was available in the browser via Browserify, I
      decided to give Browserify another try.
    <p>
      So far, Browserify is working well - it lets me use the
      pipe API I love in Nodejs.  Other Nodejs modules are available
      also.  When I write a new module, I can write it in typical
      Nodejs fashion and I feel comfortable knowing it will work in
      the browser and Nodejs. I switched my unit test
      library from Karma to Tape.  Tape is written by substack, the
      same person who created Browserify, so of course it works with
      Browserify.  I finally feel like I have a tool that allows me to
      write code for nodejs and the browser.  Most importantly, it is
      easy to use and comprehend.  I haven't had to put much thought
      into shared code in a while, which is exactly how I like it!
    </p>

    <table id="related"></table>

    <!-- Disqus Thread -->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'sethlakowske'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    <!-- Google analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-30272910-1', 'auto');
      ga('send', 'pageview');
    </script>

  </body>

    
</html>
